---
title: "Что такое Uniswap V4?"
description: "Uniswap V4, последняя версия децентрализованной биржи (DEX), предлагает расширенные функции, такие как настраиваемые пулы ликвидности через хуки, повышая эффективность торговли. Однако, при использовании этой платформы, пользователи могут столкнуться с сложностью и потенциальными комиссиями за газ, связанными с ее открытой и гибкой архитектурой."
level: "advanced"
coverImage: "/assets/blog/what-is-uniswap-v4/cover.png"
date: "2023-10-19T05:35:07.322Z"
time: 4
ogImage:
  url: "/assets/what-is-uniswap-v4/t/cover.png"
tags:
  - altcoin
---

## Введение
В июне 2023 года платформа Uniswap опубликовала черновой вариант кода Uniswap V4, в котором описаны новые возможности в протоколе децентрализованной биржи (DEX).

Среди новых функций представлены хуки, которые обеспечивают расширенную настройку пулов ликвидности, и технология Singleton, повышающая эффективность кросс-пула ликвидности. Помимо этого, в протокол вернут торговые пары с нативным токеном ETH.

Ожидается, что Uniswap V4 обеспечит множество преимуществ, среди которых расширенная настройка, повышенная эффективность, сниженные комиссии за газ и продвинутые торговые стратегии.

Среди потенциальных недостатков Uniswap V4 можно выделить комиссии за вывод средств и лицензии, ограничивающие использование исходного кода Uniswap.

## Что такое Uniswap  
Uniswap - это децентрализованная биржа (DEX), построенная на базе блокчейна Ethereum. С ее помощью пользователи могут проводить обмен различными цифровыми активами, используя модель автоматического маркет-мейкера (AMM), и при этом они не нуждаются в традиционной книге ордеров.

Платформа Uniswap была создана в 2018 году разработчиком Ethereum по имени Хайден Адамс. Он вдохновился идеей Виталика Бутерина, сооснователя Ethereum, который разработал концепцию автоматического маркет-мейкера на блокчейне.

С течением времени Uniswap стала лидером на рынке децентрализованных бирж (DEX), достигнув более высоких объемов торгов и более глубокой ликвидности по сравнению с другими DEX. К 2023 году Uniswap занимает лидирующие позиции среди DEX по различным показателям, включая объем торгов, ликвидность и количество активных пользователей.

Платформа Uniswap прошла несколько итераций: в 2020 году была выпущена версия Uniswap V2, а в 2021 году - Uniswap V3. В июне 2023 года Uniswap представила черновой вариант кода Uniswap V4, в котором представлены новые значимые функции.

В данной статье мы подробно рассмотрим изменения, внесенные в Uniswap V4, но перед этим равносильно важно освежить в памяти предыдущие версии Uniswap, чтобы лучше понять развитие этой платформы.

<!-- banner_place -->

## Особенности Uniswap V1 
Uniswap V1, первая версия платформы, была представлена в ноябре 2018 года в качестве пилотного проекта для проверки концепции. Основной инновацией стала модель маркет-мейкера с постоянным продуктом (CPMM).

Uniswap V1 ушла от традиционной системы, использующей книгу ордеров, и вместо этого позволила держателям токенов внести их в пулы ликвидности для торговых пар (например, ETH/DAI) и взамен получить долю от комиссий, взимаемых с пользователей, использующих эти пулы.

В Uniswap V1 была предоставлена возможность обменивать токены ERC-20 между собой и с эфиром (ETH). Процесс обмена ERC-20 токенов включал два этапа:

Обмен первого токена (ERC-20) на эфир (ETH).

Обмен эфира (ETH) на второй токен (ERC-20).

Эти два этапа были обязательны, так как смарт-контракты Uniswap V1 поддерживали только непосредственные пулы ликвидности между ERC-20 токенами и эфиром (ETH).

Не смотря на то, что Uniswap V1 был революционным шагом, у этой версии были недостатки. Алгоритмы ценообразования оказались не совсем эффективными и могли быть использованы в арбитражных операциях, а при осуществлении крупных сделок возникала значительная проскальзывание.

## Особенности Uniswap V2  
Для устранения недостатков Uniswap V1 была разработана и выпущена Uniswap V2 в мае 2020 года, внедрив в нее несколько существенных улучшений. Во второй версии Uniswap были внедрены прямые обмены токенов, что сократило проскальзывание и повысило эффективное использование капитала.

Кроме того, в Uniswap V2 была представлена функциональность флеш-свопов. Она давала пользователям возможность извлекать средства из пулов ликвидности и использовать их на свое усмотрение, однако в рамках той же транзакции им приходилось вернуть извлеченную сумму (с уплатой комиссии). Этот механизм создал новые возможности для арбитража и получения дохода без необходимости в первоначальных капиталовложениях.

Uniswap V2 также ввела концепцию средневзвешенных по времени цен (TWAP), что позволило другим децентрализованным приложениям безопасно и свободно использовать ценовые данные из Uniswap.

## Особенности Uniswap V3
В мае 2021 года была представлена Uniswap V3, которая призвана была решить проблемы, связанные с эффективным использованием капитала и концентрацией ликвидности. В рамках Uniswap V3, поставщики ликвидности получили возможность выбирать конкретные ценовые диапазоны, в которых их активы будут активно использоваться, что позволяло им зарабатывать повышенные комиссии за счет максимальной эффективности капитала.

Uniswap V3 также ввела несколько уровней комиссий (0,05%, 0,30% и 1,00%), каждый из которых соответствовал разному уровню риска и объему торгов.

Одним из ключевых нововведений стала невзаимозаменяемая ликвидность (NFL), где провайдеры ликвидности получали NFT, представляющие их долю в пулах ликвидности. Эти NFT можно было использовать для торговли, продажи или передачи своих позиций в пулах ликвидности, при этом они не влияли на состав активов в пуле.

DeFi-протокол также интегрировался с Optimism, решением второго уровня на Ethereum, с целью уменьшения комиссий за транзакции и улучшения масштабируемости всей платформы.

## Что нового в Uniswap V4
В Uniswap V4, который еще не официально выпущен, внесены несколько значительных нововведений, которые можно изучить в черновом варианте кода и технической документации:

1. Хуки и настраиваемые пулы: Uniswap V4 вводит концепцию хуков, которые позволяют разработчикам настраивать пулы ликвидности. Эти хуки выполняются на различных этапах жизненного цикла пула, что дает гибкость для реализации различных функций. Например, хуки позволяют управлять динамическими комиссиями, добавлять лимитные ончейн-ордера или даже выступать в роли маркет-мейкера с учетом средневзвешенных по времени цен.

2. Технология Singleton: Одним из ключевых изменений Uniswap V4 является объединение всех пулов ликвидности в одном контракте. Это устраняет необходимость перемещать токены между разными контрактами при обмене, что снижает расходы на газ. По оценкам Uniswap, это снижение может составить до 99% при создании пула.

3. Флеш-учет: Этот новый механизм позволяет оптимизировать операции, устраняя необходимость во внешних переводах токенов до завершения операции. Это снижает сложность и уменьшает затраты на газ, что особенно важно с учетом внедрения хуков и роста числа пулов ликвидности.

4. Торговые пары с нативным токеном ETH: Uniswap V4 возвращает торговые пары с нативным токеном ETH, что позволяет пользователям торговать парой WETH (Wrapped ETH) и ETH без необходимости создавать дополнительные обернутые версии и тратить дополнительные средства на газ. Это также снижает стоимость переводов, делая их более эффективными и доступными.

## Преимущества Uniswap V4
Uniswap V4 предоставляет ряд значительных преимуществ, которые включают в себя:

1. Расширенная настройка: Благодаря введению хуков, разработчики получают большую свободу для создания инновационных пулов ликвидности с настраиваемыми торговыми функциями.

2. Повышенная эффективность: Внедрение хуков, контракта Singleton и флеш-учета сделает маршрутизацию транзакций более эффективной, что обеспечит более быстрые и экономически эффективные операции.

3. Снижение комиссий за газ: Новые функции Uniswap V4 предоставят возможность дополнительного снижения комиссий за газ, что сделает протокол более доступным для пользователей.

4. Повышение доходов для провайдеров ликвидности: Динамические структуры комиссий позволят провайдерам ликвидности более активно управлять своими пулами и увеличить свой потенциальный доход.

5. Продвинутые торговые стратегии: Новые функции, такие как маркет-мейкер с учетом средневзвешенных по времени цен (TWAMM), лимитные ордера и динамические комиссии, предоставляют опытным трейдерам средства для реализации продвинутых торговых стратегий, которые ранее были недоступны.

## Uniswap V4 имеет несколько потенциальных недостатков:

Взимание комиссий: В Uniswap V4 действуют два различных механизма комиссий, включая комиссии за своп и комиссии за вывод средств, и их наличие может сделать использование протокола дороже для пользователей. Управляющие Uniswap могут также решать, взимать ли проценты от комиссий в определенных пулах.

Ограничения лицензии: Uniswap V4 выпущена под лицензией Business Source License 1.1, которая вводит ограничения на коммерческое и производственное использование исходного кода в течение определенного срока. Это ограничение может вызвать критику от части сообщества, которая желает более открытого доступа к исходному коду.

## Заключение
Рынок децентрализованных бирж (DEX) постоянно развивается, и Uniswap - одна из ведущих платформ в этой области. С выходом Uniswap V4 протокол претерпел значительные изменения, предоставляя новые возможности и улучшения.

Однако следует отметить, что открытая и гибкая архитектура Uniswap V4 может создать сложности для обычных пользователей, требующие более глубокого понимания работы пулов ликвидности и новых хуков. Перед взаимодействием с этой платформой важно провести собственное исследование и тщательно изучить, как она функционирует.

